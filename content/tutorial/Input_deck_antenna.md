---
draft: false
toc: true
type: docs

linktitle: Input deck antenna
menu:
  tutorial:
    parent: Content
    weight: 230
---

Antennae allow you to specify currents in the simulation domain that are
added to the self consistent currents from the core solver. You can
either specify the currents entirely manually or you can specify a
frequency and a profile for each current component. You can have as many
antennae as you want by specifying multiple antenna blocks.

# Example Deck {#example_deck}

```perl
begin:antenna
   jx = if (r_xy lt micron, 1.0e-5, 0.0)
   jy = if (r_xy lt micron, 1.0e-5, 0.0)
   jz = if (r_xy lt micron, 1.0e-5, 0.0)
   ranges = ((-micron, micron), (-micron, micron))

   omega = 1.0e15

   start_time = start
   stop_time = end
end:antenna
```

# Keys

-   jx - Profile for current in x direction. If you do not specify the
    omega key then you should include any time dependence manually. If
    the omega key is specified any time variation in jx will be
    multiplicatively combined with the sinusoidal variation from omega.
    Can be time and space varying.
-   jy - Profile for current in y direction. If you do not specify the
    omega key then you should include any time dependence manually. If
    the omega key is specified any time variation in jy will be
    multiplicatively combined with the sinusoidal variation from omega.
    Can be time and space varying.
-   jz - Profile for current in z direction. If you do not specify the
    omega key then you should include any time dependence manually. If
    the omega key is specified any time variation in jz will be
    multiplicatively combined with the sinusoidal variation from omega.
    Can be time and space varying.
-   ranges - Array of (min,max) pairs for each dimension of your
    simulation (1 pair for EPOCH1d, 2 pairs for EPOCH2D and 3 pairs for
    EPOCH3D) showing the domain over which the antenna should operate.
    Describes the region of space over which the current from the
    antenna should be applied. The fields generated by that current will
    propagate everywhere in the simulation domain. If ranges is not
    present then the antenna will be applied to the whole domain.
    Performance of the antenna block will be highest if you set the
    smallest range possible.
-   omega - Optional frequency for the antenna. If this key is set then
    the current will vary sinusoidally with the specified frequency.
    This is faster to run than specifying a sinusoidal profile in the
    jx, jy or jz keys but performs the same (for a frequency that
    doesn't change in time, see Time variability section). Can be time
    varying, but not space varying
-   start_time - Time after which to start applying the antenna
    currents. Can be "start" to apply from the start of the
    simulation. If key is not present antenna runs from the start of the
    simulation.
-   stop_time - Time after which to cease applying the antenna
    currents. Can be "end" to apply until the end of the simulation.
    If key is not present antenna runs until the end of the simulation.

# Time variability {#time_variability}

When you specify time variation for the jx, jy or jz keys this specifies
the **instantaneous** current to be applied at each moment in time.

When you specify time variation in the omega key this specifies the
frequency at this time, but this is applied to the phase state of the
antenna as an integral. So the sinusoid that is applied to the current
is $\sin\Bigl(\int_0^t\omega(t')dt'\Bigr)$. For constant $\omega$ this
reduces to $\sin(\omega t)$. This gives the correct behaviour for
chirped antennae

# Example deck {#example_deck_1}

An example deck for this block can be found in
example_decks/antenna.deck. The deck should take 5-20 seconds to run.
